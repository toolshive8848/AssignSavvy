<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - AssignSavvy</title>
  <link rel="icon" type="image/svg+xml" href="./assets/favicon.svg">
  <link rel="stylesheet" href="./styles/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    /* Modern Dashboard Styles */
    body {
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }
    
    .dashboard-layout {
      min-height: 100vh;
      background: transparent;
    }
    
    /* Desktop Grid Layout */
    @media (min-width: 769px) {
      .dashboard-layout {
        display: grid;
        grid-template-columns: 250px 1fr;
        grid-template-rows: 60px 1fr;
      }
    }
    
    /* Mobile Flex Layout */
    @media (max-width: 768px) {
      .dashboard-layout {
        display: flex;
        flex-direction: column;
      }
    }
    

  </style>
</head>
<body>
  <div class="dashboard-layout">
    <!-- Top Bar -->
    <div class="dashboard-topbar">
      <div class="topbar-left">
        <button class="sidebar-toggle" id="sidebar-toggle">
          <i class="fas fa-bars"></i>
        </button>
        <div class="topbar-logo">
          ðŸ“š AssignSavvy
        </div>
      </div>
      <div class="topbar-title">Dashboard</div>
      <div class="topbar-actions">
        <button class="notification-btn" id="notification-btn">
          <i class="fas fa-bell"></i>
          <div class="notification-badge"></div>
        </button>
        <a href="index.html" class="home-btn">
          <i class="fas fa-home"></i>
          <span>Home</span>
        </a>
      </div>
    </div>
    
    <!-- Sidebar -->
    <div class="dashboard-sidebar" id="dashboard-sidebar">
      <style>
        .dashboard-sidebar {
          background: rgba(255, 255, 255, 0.95);
          backdrop-filter: blur(20px);
          border-right: 1px solid rgba(226, 232, 240, 0.8);
          display: flex;
          flex-direction: column;
          padding: var(--space-6) 0;
          transition: transform 0.3s ease;
        }
      </style>
      
      <!-- Navigation -->
      <ul class="sidebar-nav">
        <li>
          <a href="dashboard.html" class="sidebar-nav-item active">
            <i class="fas fa-chart-line"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li>
          <a href="writer.html" class="sidebar-nav-item">
            <i class="fas fa-pen"></i>
            <span>Writer</span>
          </a>
        </li>
        <li>
          <a href="researcher.html" class="sidebar-nav-item">
            <i class="fas fa-magnifying-glass"></i>
            <span>Researcher</span>
          </a>
        </li>
        <li>
          <a href="detector.html" class="sidebar-nav-item">
            <i class="fas fa-shield-halved"></i>
            <span>Originality Detector</span>
          </a>
        </li>
        <li>
          <a href="prompt-engineer.html" class="sidebar-nav-item">
            <i class="fas fa-code"></i>
            <span>Prompt Engineer</span>
          </a>
        </li>
        <li>
          <a href="history.html" class="sidebar-nav-item">
            <i class="fas fa-clock-rotate-left"></i>
            <span>History</span>
          </a>
        </li>
      </ul>
      
      <!-- User Account Info - Bottom Corner -->
      <div class="user-account-info">
        <div class="user-profile-card" id="user-profile-card">
          <div class="user-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="user-details">
            <h4 id="user-name">User Name</h4>
            <p class="user-plan" id="user-plan">Free Plan</p>
            <div class="user-credits">
              <i class="fas fa-coins"></i>
              <span id="user-credits">145/200 Credits</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Main Content -->
    <div class="dashboard-content">
      <style>
        .dashboard-content {
          padding: var(--space-8);
          background: transparent;
        }
        
        /* Desktop content grid positioning */
        @media (min-width: 769px) {
          .dashboard-content {
            grid-column: 2;
            grid-row: 2;
          }
        }
        
        .welcome-card {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          border-radius: var(--radius-xl);
          padding: var(--space-8);
          color: white;
          margin-bottom: var(--space-8);
          position: relative;
          overflow: hidden;
        }
        
        .welcome-card::before {
          content: '';
          position: absolute;
          top: 0;
          right: 0;
          width: 200px;
          height: 200px;
          background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
          border-radius: 50%;
          transform: translate(50%, -50%);
        }
        
        .welcome-content {
          position: relative;
          z-index: 2;
        }
        
        .welcome-card h2 {
          font-size: 2rem;
          font-weight: 700;
          margin: 0 0 var(--space-3) 0;
        }
        
        .welcome-card p {
          font-size: 1.1rem;
          margin: 0 0 var(--space-6) 0;
          opacity: 0.9;
        }
        
        .welcome-actions {
          display: flex;
          gap: var(--space-4);
          flex-wrap: wrap;
        }
        
        .welcome-btn {
          padding: var(--space-3) var(--space-6);
          background: rgba(255, 255, 255, 0.2);
          color: white;
          border: 2px solid rgba(255, 255, 255, 0.3);
          border-radius: var(--radius-lg);
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;
          text-decoration: none;
          display: flex;
          align-items: center;
          gap: var(--space-2);
        }
        
        .welcome-btn:hover {
          background: rgba(255, 255, 255, 0.3);
          border-color: rgba(255, 255, 255, 0.5);
          transform: translateY(-2px);
        }
        
        .welcome-btn.primary {
          background: white;
          color: #667eea;
          border-color: white;
        }
        
        .welcome-btn.primary:hover {
          background: rgba(255, 255, 255, 0.9);
          transform: translateY(-2px);
        }
        
        .section-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: var(--space-6);
        }
        
        .section-title {
          font-size: 1.5rem;
          font-weight: 700;
          color: var(--text-gray-800);
          margin: 0;
        }
        
        .stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: var(--space-6);
          margin-bottom: var(--space-10);
        }
        
        .stat-card {
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(226, 232, 240, 0.8);
          border-radius: var(--radius-xl);
          padding: var(--space-6);
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
        }
        
        .stat-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
          border-color: rgba(102, 126, 234, 0.3);
        }
        
        .stat-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 4px;
          background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .stat-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: var(--space-4);
        }
        
        .stat-icon {
          width: 48px;
          height: 48px;
          border-radius: var(--radius-lg);
          background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
          display: flex;
          align-items: center;
          justify-content: center;
          color: #667eea;
          font-size: 1.5rem;
        }
        
        .stat-title {
          font-size: 0.9rem;
          font-weight: 600;
          color: var(--text-gray-600);
          margin: 0;
        }
        
        .stat-value {
          font-size: 2.5rem;
          font-weight: 800;
          color: var(--text-gray-800);
          margin: var(--space-2) 0;
        }
        
        .stat-change {
          display: flex;
          align-items: center;
          gap: var(--space-1);
          font-size: 0.85rem;
          font-weight: 600;
        }
        
        .stat-change.positive {
          color: #10b981;
        }
        
        .stat-change.negative {
          color: #ef4444;
        }
        
        /* Desktop styles - ensure proper layout on larger screens */
        @media (min-width: 769px) {
          .dashboard-sidebar {
            position: static;
            transform: none;
            top: auto;
            left: auto;
            width: auto;
            height: auto;
            z-index: auto;
          }
          
          .dashboard-content {
            margin-left: 0;
            margin-top: 0;
            padding: var(--space-8);
          }
        }
        
        @media (max-width: 768px) {
          .dashboard-topbar {
            padding: 0 var(--space-4);
            height: 60px;
          }
          
          .topbar-left {
            gap: var(--space-2);
          }
          
          .topbar-title {
            display: none;
          }
          
          .topbar-actions {
            gap: var(--space-2);
          }
          
          .home-btn {
            padding: var(--space-2);
            font-size: 0.9rem;
          }
          
          .home-btn span {
            display: none;
          }
          
          .dashboard-sidebar {
            position: fixed;
            top: 60px;
            left: 0;
            width: 250px;
            height: calc(100vh - 60px);
            transform: translateX(-100%);
            z-index: 999;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(226, 232, 240, 0.8);
            transition: transform 0.3s ease;
          }
          
          .dashboard-sidebar.sidebar-open {
            transform: translateX(0);
          }
          
          .dashboard-content {
            margin-left: 0;
            padding: var(--space-4);
            margin-top: 60px;
          }
          
          .welcome-card {
            padding: var(--space-6);
          }
          
          .welcome-card h2 {
            font-size: 1.5rem;
          }
          
          .stats-grid {
            grid-template-columns: 1fr;
          }
        }
      </style>
      
      <!-- Welcome Card -->
      <div class="welcome-card">
        <div class="welcome-content">
          <h2 id="welcome-message">Welcome back! ðŸ‘‹</h2>
          <p>Ready to boost your productivity and create amazing content today?</p>
          <div class="welcome-actions">
            <a href="writer.html" class="welcome-btn primary">
              <i class="fas fa-pen"></i>
              Start Writing
            </a>
            <a href="researcher.html" class="welcome-btn">
              <i class="fas fa-magnifying-glass"></i>
              Research Topic
            </a>
          </div>
        </div>
      </div>
      
      <!-- Performance Cards -->
      <div class="section-header">
        <h3 class="section-title">Performance Overview</h3>
      </div>
      
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-header">
            <div class="stat-icon">
              <i class="fas fa-file-text"></i>
            </div>
          </div>
          <div class="stat-title">Words Generated</div>
          <div class="stat-value" id="total-words">0</div>
          <div class="stat-change" id="words-change">
            <i class="fas fa-minus"></i> No data yet
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <div class="stat-icon">
              <i class="fas fa-check-circle"></i>
            </div>
          </div>
          <div class="stat-title">Projects Completed</div>
          <div class="stat-value" id="total-projects">0</div>
          <div class="stat-change" id="projects-change">
            <i class="fas fa-minus"></i> No data yet
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <div class="stat-icon">
              <i class="fas fa-coins"></i>
            </div>
          </div>
          <div class="stat-title">Credits Used</div>
          <div class="stat-value" id="credits-used">0</div>
          <div class="stat-change" id="credits-change">
            <i class="fas fa-minus"></i> No data yet
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-header">
            <div class="stat-icon">
              <i class="fas fa-clock"></i>
            </div>
          </div>
          <div class="stat-title">Time Saved</div>
          <div class="stat-value" id="time-saved">0h</div>
          <div class="stat-change" id="time-change">
            <i class="fas fa-minus"></i> No data yet
          </div>
        </div>
      </div>
      
      <!-- AI Tools Section -->
      <div class="section-header">
        <h3 class="section-title">AI Tools</h3>
        <a href="#" class="view-all-link">
          View All
          <i class="fas fa-arrow-right"></i>
        </a>
      </div>
      
      <div class="tools-grid">
        <!-- Writer Tool -->
        <div class="tool-card">
          <div class="tool-header">
            <div class="tool-icon writer">
              <i class="fas fa-pen"></i>
            </div>
            <a href="writer.html" class="tool-link">
              <i class="fas fa-arrow-right"></i>
            </a>
          </div>
          <h4 class="tool-title">Writer</h4>
          <p class="tool-description">Generate high-quality content for your assignments with advanced AI.</p>
          <div class="tool-stats">
            <span class="tool-stat">
              <i class="fas fa-file-text"></i>
              <span id="writer-words-today">0 words today</span>
            </span>
          </div>
        </div>
        
        <!-- Researcher Tool -->
        <div class="tool-card">
          <div class="tool-header">
            <div class="tool-icon researcher">
              <i class="fas fa-magnifying-glass"></i>
            </div>
            <a href="researcher.html" class="tool-link">
              <i class="fas fa-arrow-right"></i>
            </a>
          </div>
          <h4 class="tool-title">Researcher</h4>
          <p class="tool-description">Find and organize credible sources for your research projects.</p>
          <div class="tool-stats">
            <span class="tool-stat">
              <i class="fas fa-search"></i>
              <span id="research-sources-today">0 sources found</span>
            </span>
          </div>
        </div>
        
        <!-- Detector Tool -->
        <div class="tool-card">
          <div class="tool-header">
            <div class="tool-icon detector">
              <i class="fas fa-shield-halved"></i>
            </div>
            <a href="detector.html" class="tool-link">
              <i class="fas fa-arrow-right"></i>
            </a>
          </div>
          <h4 class="tool-title">Originality Detector</h4>
          <p class="tool-description">Check for plagiarism and AI-generated content detection.</p>
          <div class="tool-stats">
            <span class="tool-stat">
              <i class="fas fa-check-circle"></i>
              <span id="detector-avg-score">No data</span>
            </span>
          </div>
        </div>
        
        <!-- Prompt Engineer Tool -->
        <div class="tool-card">
          <div class="tool-header">
            <div class="tool-icon prompt">
              <i class="fas fa-code"></i>
            </div>
            <a href="prompt-engineer.html" class="tool-link">
              <i class="fas fa-arrow-right"></i>
            </a>
          </div>
          <h4 class="tool-title">Prompt Engineer</h4>
          <p class="tool-description">Optimize your AI prompts for better and more accurate results.</p>
          <div class="tool-stats">
            <span class="tool-stat">
              <i class="fas fa-magic"></i>
              <span id="prompts-optimized-today">0 prompts optimized</span>
            </span>
          </div>
        </div>
      </div>
      
      <!-- Recent Activity -->
      <div class="section-header">
        <h3 class="section-title">Recent Activity</h3>
        <a href="history.html" class="view-all-link">
          View All
          <i class="fas fa-arrow-right"></i>
        </a>
      </div>
      
      <div class="activity-card">
        <div class="empty-state">
          <div class="empty-icon">
            <i class="fas fa-folder-open"></i>
          </div>
          <h4 class="empty-title">No recent activity</h4>
          <p class="empty-description">Your recent projects and activities will appear here</p>
          <a href="writer.html" class="empty-action">
            <i class="fas fa-plus"></i>
            Create Your First Project
          </a>
        </div>
      </div>
      
      <style>
        .view-all-link {
          display: flex;
          align-items: center;
          gap: var(--space-2);
          color: #667eea;
          text-decoration: none;
          font-weight: 600;
          font-size: 0.9rem;
          transition: all 0.3s ease;
        }
        
        .view-all-link:hover {
          color: #764ba2;
          transform: translateX(2px);
        }
        
        .tools-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: var(--space-6);
          margin-bottom: var(--space-10);
        }
        
        .tool-card {
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(226, 232, 240, 0.8);
          border-radius: var(--radius-xl);
          padding: var(--space-6);
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
        }
        
        .tool-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
          border-color: rgba(102, 126, 234, 0.3);
        }
        
        .tool-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: var(--space-4);
        }
        
        .tool-icon {
          width: 56px;
          height: 56px;
          border-radius: var(--radius-lg);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 1.5rem;
          color: white;
        }
        
        .tool-icon.writer {
          background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .tool-icon.researcher {
          background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .tool-icon.detector {
          background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .tool-icon.prompt {
          background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .tool-link {
          width: 36px;
          height: 36px;
          border-radius: var(--radius-md);
          background: rgba(102, 126, 234, 0.1);
          display: flex;
          align-items: center;
          justify-content: center;
          color: #667eea;
          text-decoration: none;
          transition: all 0.3s ease;
        }
        
        .tool-link:hover {
          background: #667eea;
          color: white;
          transform: scale(1.1);
        }
        
        .tool-title {
          font-size: 1.2rem;
          font-weight: 700;
          color: var(--text-gray-800);
          margin: 0 0 var(--space-2) 0;
        }
        
        .tool-description {
          color: var(--text-gray-600);
          line-height: 1.5;
          margin: 0 0 var(--space-4) 0;
        }
        
        .tool-stats {
          display: flex;
          gap: var(--space-4);
        }
        
        .tool-stat {
          display: flex;
          align-items: center;
          gap: var(--space-1);
          font-size: 0.85rem;
          color: var(--text-gray-500);
          font-weight: 500;
        }
        
        .tool-stat i {
          color: #667eea;
        }
        
        .activity-card {
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(226, 232, 240, 0.8);
          border-radius: var(--radius-xl);
          padding: var(--space-8);
        }
        
        .empty-state {
          text-align: center;
          max-width: 400px;
          margin: 0 auto;
        }
        
        .empty-icon {
          width: 80px;
          height: 80px;
          border-radius: 50%;
          background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 0 auto var(--space-4) auto;
          font-size: 2rem;
          color: #667eea;
        }
        
        .empty-title {
          font-size: 1.3rem;
          font-weight: 700;
          color: var(--text-gray-700);
          margin: 0 0 var(--space-2) 0;
        }
        
        .empty-description {
          color: var(--text-gray-500);
          margin: 0 0 var(--space-6) 0;
          line-height: 1.5;
        }
        
        .empty-action {
          display: inline-flex;
          align-items: center;
          gap: var(--space-2);
          padding: var(--space-3) var(--space-6);
          background: linear-gradient(135deg, #667eea, #764ba2);
          color: white;
          border-radius: var(--radius-lg);
          text-decoration: none;
          font-weight: 600;
          transition: all 0.3s ease;
        }
        
        .empty-action:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        @media (max-width: 768px) {
          .tools-grid {
            grid-template-columns: 1fr;
            gap: var(--space-4);
          }
          
          .tool-card {
            padding: var(--space-5);
          }
          
          .tool-header {
            flex-direction: column;
            align-items: flex-start;
            gap: var(--space-3);
          }
          
          .tool-link {
            align-self: flex-end;
          }
        }
      </style>
    </div>
  </div>

  <!-- User Profile Modal -->
  <div id="user-profile-modal" class="profile-modal" style="display: none;">
    <div class="profile-modal-content">
      <div class="profile-modal-header">
        <h3 class="profile-modal-title">User Profile</h3>
        <button id="close-profile-modal" class="profile-modal-close">&times;</button>
      </div>
      <div class="profile-modal-body">
        <div class="profile-user-info">
          <div class="profile-user-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="profile-user-details">
            <h4 id="modal-user-name" class="profile-user-name">User Name</h4>
            <p id="modal-user-email" class="profile-user-email">john.doe@example.com</p>
            <span class="profile-user-plan" id="modal-user-plan">Free Plan</span>
          </div>
        </div>
        <div class="profile-stats">
          <div class="profile-stat">
            <span class="profile-stat-value">2,847</span>
            <span class="profile-stat-label">Words Generated</span>
          </div>
          <div class="profile-stat">
            <span class="profile-stat-value">23</span>
            <span class="profile-stat-label">Projects</span>
          </div>
          <div class="profile-stat">
            <span class="profile-stat-value">15</span>
            <span class="profile-stat-label">Days Active</span>
          </div>
        </div>
        <div class="profile-actions">
          <button class="profile-btn profile-btn-primary" onclick="window.location.href='auth.html'">Edit Profile</button>
          <button class="profile-btn profile-btn-secondary" onclick="logout()">Logout</button>
        </div>
      </div>
    </div>
  </div>

  <style>
    .profile-modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
    }
    
    .profile-modal-content {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      margin: 5% auto;
      padding: 0;
      border: 1px solid rgba(226, 232, 240, 0.8);
      border-radius: var(--radius-xl);
      width: 90%;
      max-width: 500px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }
    
    .profile-modal-header {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: var(--space-6);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .profile-modal-title {
      margin: 0;
      font-size: 1.3rem;
      font-weight: 700;
    }
    
    .profile-modal-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      padding: var(--space-2);
      border-radius: var(--radius-md);
      transition: all 0.3s ease;
    }
    
    .profile-modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
    }
    
    .profile-modal-body {
      padding: var(--space-6);
    }
    
    .profile-user-info {
      display: flex;
      align-items: center;
      gap: var(--space-4);
      margin-bottom: var(--space-6);
    }
    
    .profile-user-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      color: white;
    }
    
    .profile-user-details {
      flex: 1;
    }
    
    .profile-user-name {
      margin: 0 0 var(--space-1) 0;
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--text-gray-800);
    }
    
    .profile-user-email {
      margin: 0 0 var(--space-2) 0;
      color: var(--text-gray-600);
    }
    
    .profile-user-plan {
      display: inline-block;
      padding: var(--space-1) var(--space-3);
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border-radius: var(--radius-full);
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    .profile-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--space-4);
      margin-bottom: var(--space-6);
      padding: var(--space-4);
      background: rgba(102, 126, 234, 0.05);
      border-radius: var(--radius-lg);
    }
    
    .profile-stat {
      text-align: center;
    }
    
    .profile-stat-value {
      display: block;
      font-size: 1.5rem;
      font-weight: 700;
      color: #667eea;
      margin-bottom: var(--space-1);
    }
    
    .profile-stat-label {
      font-size: 0.8rem;
      color: var(--text-gray-600);
      font-weight: 500;
    }
    
    .profile-actions {
      display: flex;
      gap: var(--space-3);
    }
    
    .profile-btn {
      flex: 1;
      padding: var(--space-3) var(--space-4);
      border: none;
      border-radius: var(--radius-lg);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .profile-btn-primary {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
    }
    
    .profile-btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
    }
    
    .profile-btn-secondary {
      background: rgba(102, 126, 234, 0.1);
      color: #667eea;
    }
    
    .profile-btn-secondary:hover {
      background: rgba(102, 126, 234, 0.2);
    }
  </style>

    // API helper functions
    function getAuthToken() {
      return localStorage.getItem('authToken') || 'mock-token';
    }

    async function makeAuthenticatedRequest(url, options = {}) {
      const token = getAuthToken();
      return fetch(url, {
        ...options,
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${token}`,
          ...options.headers
        }
      });
    }

    // Load real user data and statistics
    async function loadDashboardData() {
      try {
        // Load user profile
        const profileResponse = await makeAuthenticatedRequest('/api/users/profile');
        if (profileResponse.ok) {
          const profileData = await profileResponse.json();
          updateUserProfile(profileData);
          updateWelcomeMessage(profileData.name);
        }

        // Load user statistics
        const statsResponse = await makeAuthenticatedRequest('/api/users/stats');
        if (statsResponse.ok) {
          const statsData = await statsResponse.json();
          updatePerformanceMetrics(statsData);
        }

        // Load tool usage statistics
        await loadToolStatistics();

      } catch (error) {
        console.error('Error loading dashboard data:', error);
        showErrorMessage('Failed to load dashboard data. Please refresh the page.');
      }
    }

    function updateUserProfile(userData) {
      if (window.userSession) {
        window.userSession.updateUser({
          name: userData.name,
          email: userData.email,
          plan: userData.isPremium ? 'pro' : 'free',
          credits: userData.credits,
          maxCredits: userData.isPremium ? 2000 : 200
        });
      }
    }

    function updateWelcomeMessage(userName) {
      const welcomeMessage = document.getElementById('welcome-message');
      if (welcomeMessage && userName) {
        welcomeMessage.textContent = `Welcome back, ${userName}! ðŸ‘‹`;
      }
    }

    function updatePerformanceMetrics(statsData) {
      // Update total words generated
      const totalWordsEl = document.getElementById('total-words');
      if (totalWordsEl) {
        const totalWords = statsData.allTime?.totalWordsGenerated || 0;
        totalWordsEl.textContent = formatNumber(totalWords);
      }

      // Update projects completed
      const totalProjectsEl = document.getElementById('total-projects');
      if (totalProjectsEl) {
        const totalProjects = statsData.allTime?.totalAssignments || 0;
        totalProjectsEl.textContent = totalProjects;
      }

      // Update credits used
      const creditsUsedEl = document.getElementById('credits-used');
      if (creditsUsedEl) {
        const creditsUsed = statsData.allTime?.totalCreditsUsed || 0;
        creditsUsedEl.textContent = formatNumber(creditsUsed);
      }

      // Update time saved (estimate: 1 hour saved per 1000 words)
      const timeSavedEl = document.getElementById('time-saved');
      if (timeSavedEl) {
        const totalWords = statsData.allTime?.totalWordsGenerated || 0;
        const hoursSaved = Math.round(totalWords / 1000);
        timeSavedEl.textContent = `${hoursSaved}h`;
      }

      // Update change indicators
      updateChangeIndicators(statsData);
    }

    function updateChangeIndicators(statsData) {
      const allTime = statsData.allTime || {};
      const thisMonth = statsData.thisMonth || {};

      // Words change
      const wordsChangeEl = document.getElementById('words-change');
      if (wordsChangeEl) {
        const monthlyWords = thisMonth.totalWordsGenerated || 0;
        if (monthlyWords > 0) {
          wordsChangeEl.innerHTML = `<i class="fas fa-arrow-up"></i> ${formatNumber(monthlyWords)} this month`;
          wordsChangeEl.className = 'stat-change positive';
        } else {
          wordsChangeEl.innerHTML = `<i class="fas fa-minus"></i> No activity this month`;
          wordsChangeEl.className = 'stat-change';
        }
      }

      // Projects change
      const projectsChangeEl = document.getElementById('projects-change');
      if (projectsChangeEl) {
        const monthlyProjects = thisMonth.totalAssignments || 0;
        if (monthlyProjects > 0) {
          projectsChangeEl.innerHTML = `<i class="fas fa-arrow-up"></i> ${monthlyProjects} this month`;
          projectsChangeEl.className = 'stat-change positive';
        } else {
          projectsChangeEl.innerHTML = `<i class="fas fa-minus"></i> No projects this month`;
          projectsChangeEl.className = 'stat-change';
        }
      }

      // Credits change
      const creditsChangeEl = document.getElementById('credits-change');
      if (creditsChangeEl) {
        const monthlyCredits = thisMonth.creditsUsed || 0;
        if (monthlyCredits > 0) {
          creditsChangeEl.innerHTML = `<i class="fas fa-arrow-up"></i> ${formatNumber(monthlyCredits)} this month`;
          creditsChangeEl.className = 'stat-change negative';
        } else {
          creditsChangeEl.innerHTML = `<i class="fas fa-minus"></i> No usage this month`;
          creditsChangeEl.className = 'stat-change';
        }
      }

      // Time change
      const timeChangeEl = document.getElementById('time-change');
      if (timeChangeEl) {
        const monthlyWords = thisMonth.totalWordsGenerated || 0;
        const monthlyHours = Math.round(monthlyWords / 1000);
        if (monthlyHours > 0) {
          timeChangeEl.innerHTML = `<i class="fas fa-arrow-up"></i> ${monthlyHours}h this month`;
          timeChangeEl.className = 'stat-change positive';
        } else {
          timeChangeEl.innerHTML = `<i class="fas fa-minus"></i> No time saved this month`;
          timeChangeEl.className = 'stat-change';
        }
      }
    }

    async function loadToolStatistics() {
      try {
        // Load today's usage for each tool
        const today = new Date().toISOString().split('T')[0];

        // Writer statistics
        const writerResponse = await makeAuthenticatedRequest(`/api/writer/stats?date=${today}`);
        if (writerResponse.ok) {
          const writerData = await writerResponse.json();
          const writerWordsEl = document.getElementById('writer-words-today');
          if (writerWordsEl) {
            const wordsToday = writerData.wordsToday || 0;
            writerWordsEl.textContent = `${formatNumber(wordsToday)} words today`;
          }
        }

        // Research statistics
        const researchResponse = await makeAuthenticatedRequest(`/api/research/stats?date=${today}`);
        if (researchResponse.ok) {
          const researchData = await researchResponse.json();
          const researchSourcesEl = document.getElementById('research-sources-today');
          if (researchSourcesEl) {
            const sourcesToday = researchData.sourcesToday || 0;
            researchSourcesEl.textContent = `${sourcesToday} sources found`;
          }
        }

        // Detector statistics
        const detectorResponse = await makeAuthenticatedRequest(`/api/detector/stats?date=${today}`);
        if (detectorResponse.ok) {
          const detectorData = await detectorResponse.json();
          const detectorScoreEl = document.getElementById('detector-avg-score');
          if (detectorScoreEl) {
            const avgScore = detectorData.averageOriginalityScore;
            if (avgScore !== null && avgScore !== undefined) {
              detectorScoreEl.textContent = `${Math.round(avgScore)}% avg originality`;
            } else {
              detectorScoreEl.textContent = 'No analyses today';
            }
          }
        }

        // Prompt Engineer statistics
        const promptResponse = await makeAuthenticatedRequest(`/api/prompt/stats?date=${today}`);
        if (promptResponse.ok) {
          const promptData = await promptResponse.json();
          const promptsOptimizedEl = document.getElementById('prompts-optimized-today');
          if (promptsOptimizedEl) {
            const optimizedToday = promptData.optimizedToday || 0;
            promptsOptimizedEl.textContent = `${optimizedToday} prompts optimized`;
          }
        }

      } catch (error) {
        console.error('Error loading tool statistics:', error);
      }
    }

    function formatNumber(num) {
      if (num >= 1000000) {
        return (num / 1000000).toFixed(1) + 'M';
      } else if (num >= 1000) {
        return (num / 1000).toFixed(1) + 'k';
      }
      return num.toString();
    }

    function showErrorMessage(message) {
      const errorDiv = document.createElement('div');
      errorDiv.className = 'alert alert-error';
      errorDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #ef4444;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        z-index: 1000;
        max-width: 300px;
      `;
      errorDiv.textContent = message;
      document.body.appendChild(errorDiv);
      
      setTimeout(() => {
        if (errorDiv.parentNode) {
          errorDiv.parentNode.removeChild(errorDiv);
        }
      }, 5000);
    }

    function logout() {
      if (confirm('Are you sure you want to logout?')) {
        // Clear user data
        localStorage.removeItem('userToken');
        localStorage.removeItem('userData');
        // Redirect to auth page
        window.location.href = 'auth.html';
      }
    }

    function openProfileModal() {
      document.getElementById('user-profile-modal').style.display = 'block';
    }

    function closeProfileModal() {
      document.getElementById('user-profile-modal').style.display = 'none';
    }

    // Sidebar toggle functionality
    document.addEventListener('DOMContentLoaded', function() {
      // Load real dashboard data
      loadDashboardData();
      
      // User profile modal functionality
      const userProfileCard = document.getElementById('user-profile-card');
      const userProfileModal = document.getElementById('user-profile-modal');
      const closeProfileModal = document.getElementById('close-profile-modal');
      
      userProfileCard.addEventListener('click', function() {
        userProfileModal.style.display = 'flex';
      });
      
      closeProfileModal.addEventListener('click', function() {
        userProfileModal.style.display = 'none';
      });
      
      window.addEventListener('click', function(event) {
        if (event.target === userProfileModal) {
          userProfileModal.style.display = 'none';
        }
      });
      
      const sidebarToggle = document.getElementById('sidebar-toggle');
      const sidebar = document.getElementById('dashboard-sidebar');
      const dashboardLayout = document.querySelector('.dashboard-layout');
      const notificationBtn = document.getElementById('notification-btn');
      
      // Notification button functionality
      notificationBtn.addEventListener('click', function() {
        loadNotifications();
      });
      
      // Toggle sidebar on button click
      sidebarToggle.addEventListener('click', function() {
        if (window.innerWidth <= 768) {
          // Mobile behavior
          sidebar.classList.toggle('sidebar-open');
          dashboardLayout.classList.toggle('sidebar-active');
        } else {
          // Desktop behavior
          dashboardLayout.classList.toggle('sidebar-collapsed');
        }
      });
      
      // Close sidebar when clicking outside on mobile
      document.addEventListener('click', function(event) {
        if (window.innerWidth <= 768) {
          if (!sidebar.contains(event.target) && !sidebarToggle.contains(event.target) && sidebar.classList.contains('sidebar-open')) {
            sidebar.classList.remove('sidebar-open');
            dashboardLayout.classList.remove('sidebar-active');
          }
        }
      });
      
      // Handle window resize
      window.addEventListener('resize', function() {
        if (window.innerWidth > 768) {
          sidebar.classList.remove('sidebar-open');
          dashboardLayout.classList.remove('sidebar-active');
        } else {
          dashboardLayout.classList.remove('sidebar-collapsed');
        }
      });
      
      // Add smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth'
            });
          }
        });
      });
    });

    async function loadNotifications() {
      try {
        const response = await makeAuthenticatedRequest('/api/users/notifications');
        if (response.ok) {
          const data = await response.json();
          displayNotifications(data.notifications || []);
        } else {
          displayNotifications([]);
        }
      } catch (error) {
        console.error('Error loading notifications:', error);
        displayNotifications([]);
      }
    }

    function displayNotifications(notifications) {
      if (notifications.length === 0) {
        alert('No new notifications');
        return;
      }

      let notificationText = 'Recent Notifications:\n\n';
      notifications.forEach((notification, index) => {
        notificationText += `${index + 1}. ${notification.message}\n`;
        if (notification.timestamp) {
          notificationText += `   ${new Date(notification.timestamp).toLocaleDateString()}\n`;
        }
        notificationText += '\n';
      });

      alert(notificationText);

      // Hide notification badge after viewing
      const badge = document.querySelector('.notification-badge');
      if (badge) {
        badge.style.display = 'none';
      }
    }
  </script>


</body>
</html>