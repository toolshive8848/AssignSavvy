<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Researcher Tool - Mock Test</title>
  <link rel="stylesheet" href="./styles/main.css">
  <style>
    .mock-test-banner {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 1rem;
      text-align: center;
      margin-bottom: 2rem;
      border-radius: 8px;
    }
    .test-result {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
    }
    .loading {
      display: none;
      text-align: center;
      padding: 2rem;
    }
    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 2s linear infinite;
      margin: 0 auto 1rem;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="dashboard-layout">
    <div class="dashboard-content">
      <div class="mock-test-banner">
        <h1>ðŸ§ª Researcher Tool - Mock Test Environment</h1>
        <p>Test the research functionality with simulated responses</p>
      </div>

      <!-- Search Section -->
      <div class="card mb-6">
        <h3 class="mb-4">Research Query</h3>
        
        <div class="flex gap-4 mb-4">
          <div class="form-group flex-1">
            <input type="text" class="form-input" placeholder="Enter topic to research..." id="research-query">
          </div>
          <button class="btn btn-primary" id="research-btn">
            <i class="fas fa-search"></i> Research
          </button>
        </div>
        
        <div class="flex gap-4">
          <div class="form-group">
            <select class="form-input" id="source-filter">
              <option>All Sources</option>
              <option>Academic Journals</option>
              <option>Books</option>
              <option>News Articles</option>
              <option>Websites</option>
            </select>
          </div>
          
          <div class="form-group">
            <select class="form-input" id="year-filter">
              <option>All Years</option>
              <option>Last Year</option>
              <option>Last 5 Years</option>
              <option>Last 10 Years</option>
            </select>
          </div>
          
          <div class="form-group">
            <select class="form-input" id="sort-filter">
              <option>Relevance</option>
              <option>Date (Newest)</option>
              <option>Date (Oldest)</option>
              <option>Citations (High to Low)</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Loading State -->
      <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>Searching academic databases and sources...</p>
      </div>

      <!-- Results Section -->
      <div class="card" id="results-section" style="display: none;">
        <div class="flex mb-4">
          <div class="tabs">
            <div class="tab active" id="sources-tab">Sources</div>
            <div class="tab" id="citations-tab">Citations</div>
            <div class="tab" id="notes-tab">Research Notes</div>
          </div>
        </div>
        
        <div id="results-container"></div>
      </div>

      <!-- Test Controls -->
      <div class="card mt-6">
        <h3>Research Controls</h3>
        <div class="flex gap-4 mt-4">
          <button class="btn btn-secondary" onclick="clearResults()">Clear Results</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // TODO: Replace with actual API integration for research data
    const mockData = {};

    function performSearch(query) {
      const loading = document.getElementById('loading');
      const resultsSection = document.getElementById('results-section');
      const resultsContainer = document.getElementById('results-container');
      
      loading.style.display = 'block';
      resultsSection.style.display = 'none';
      
      // TODO: Replace with actual API call to research service
      setTimeout(() => {
        displayResults([]);
        loading.style.display = 'none';
        resultsSection.style.display = 'block';
      }, 2000);
    }

    function displayResults(results) {
      const container = document.getElementById('results-container');
      
      if (results.length === 0) {
        container.innerHTML = '<p>Research functionality requires backend integration. Please connect to the research API service.</p>';
        return;
      }
      
      container.innerHTML = results.map(result => `
        <div class="test-result">
          <h4>${result.title}</h4>
          <p class="text-sm">${result.journal}</p>
          <p>${result.abstract}</p>
          <div class="flex gap-2 mt-2">
            ${result.tags.map(tag => `<span class="badge">${tag}</span>`).join('')}
          </div>
          <div class="flex justify-between mt-4">
            <div>
              <span class="text-sm text-gray">Relevance: ${result.relevance}% | Citations: ${result.citations}</span>
            </div>
            <div class="flex gap-2">
              <button class="btn btn-outline btn-sm" onclick="bookmark('${result.title}')">
                <i class="fas fa-bookmark"></i>
              </button>
              <button class="btn btn-outline btn-sm" onclick="cite('${result.title}')">
                <i class="fas fa-quote-right"></i>
              </button>
              <button class="btn btn-primary btn-sm" onclick="downloadPDF('${result.title}')">
                <i class="fas fa-file-arrow-down"></i> PDF
              </button>
            </div>
          </div>
        </div>
      `).join('');
    }



    function clearResults() {
      document.getElementById('results-section').style.display = 'none';
      document.getElementById('research-query').value = '';
    }

    function bookmark(title) {
      alert(`Bookmarked: ${title}`);
    }

    function cite(title) {
      alert(`Citation generated for: ${title}`);
    }

    function downloadPDF(title) {
      alert(`PDF download started for: ${title}`);
    }

    // Event listeners
    document.getElementById('research-btn').addEventListener('click', () => {
      const query = document.getElementById('research-query').value;
      if (query.trim()) {
        performSearch(query);
      }
    });

    document.getElementById('research-query').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        const query = e.target.value;
        if (query.trim()) {
          performSearch(query);
        }
      }
    });
  </script>
</body>
</html>